webpackJsonp([0x6e63f4c6413f],{663:function(a,s){a.exports={data:{site:{siteMetadata:{title:"(shatteredaesthetic)",author:"Jason Polhemus"}},markdownRemark:{id:"/Users/travis/build/shatteredaesthetic/shatteredaesthetic.github.io/content/what-the-adt-p03.md absPath of file >>> MarkdownRemark",html:'<h2>Purescript, Part 3: Colorized</h2>\n<p><a href="https://gitlab.com/shatteredaesthetic/cipher-guess-ps/tree/what-adt-03">Code for this post</a> is here. Next features, new branch! Hooray!</p>\n<h4>First, a correction</h4>\n<p>The game played <em>mostly</em> right. We meant to limit ourselves to 3 guesses, but instead we got 4. This is a simple fix:</p>\n<div class="gatsby-highlight">\n      <pre class="language-haskell"><code class="language-haskell"><span class="token hvariable">logic</span> <span class="token hvariable">g</span> <span class="token punctuation">{</span> <span class="token hvariable">low</span><span class="token operator">:</span> <span class="token hvariable">l</span><span class="token punctuation">,</span> <span class="token hvariable">high</span><span class="token operator">:</span> <span class="token hvariable">h</span><span class="token punctuation">,</span> <span class="token hvariable">tolerance</span><span class="token operator">:</span> <span class="token hvariable">tol</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token constant">GameState</span> <span class="token hvariable">guesses</span> <span class="token hvariable">t</span><span class="token punctuation">)</span>\n  <span class="token operator">|</span> <span class="token hvariable">guesses</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token keyword">do</span>\n    <span class="token hvariable">tell</span> <span class="token operator">$</span> <span class="token hvariable">A.singleton</span> <span class="token operator">$</span> <span class="token hvariable">wrong</span> <span class="token operator">$</span> <span class="token string">"Game Over! You\'re out of guesses. The number was "</span> <span class="token operator">&lt;></span> <span class="token builtin">show</span> <span class="token hvariable">t</span>\n    <span class="token hvariable">pure</span> <span class="token constant">Nothing</span></code></pre>\n      </div>\n<p>We check to see if the guesses equal 1 instead of 0. Now we have three guesses. Solved.</p>\n<p>Also, I didn’t like how it asked for the number after every guess, so I moved that question to <code class="language-text">main</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-haskell"><code class="language-haskell"><span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">Effect</span> <span class="token constant">Unit</span>\n<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">void</span> <span class="token keyword">do</span>\n  <span class="token keyword">let</span> <span class="token hvariable">env</span> <span class="token operator">=</span> <span class="token hvariable">gameEnvironment</span> <span class="token number">1</span> <span class="token number">100</span> <span class="token number">3</span>\n  <span class="token hvariable">rnd</span> <span class="token operator">&lt;-</span> <span class="token hvariable">randomInt</span> <span class="token number">1</span> <span class="token number">100</span>\n  <span class="token builtin">log</span> <span class="token string">"Guess a whole number between 1 and 100:"</span>\n  <span class="token hvariable">runGame</span> <span class="token hvariable">env</span> <span class="token operator">$</span> <span class="token constant">GameState</span> <span class="token number">3</span> <span class="token hvariable">rnd</span></code></pre>\n      </div>\n<p>Okay, let’s continue.</p>\n<h4>Let’s Get On To Coloring</h4>\n<p>We’re on the terminal, so the easiest way to color the output is to use ANSI codes. We can add them to the text that gets logged. Easy peasy. Let’s look at the codes as a reference:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">Black: \\x1b[30m\nRed: \\x1b[31m\nGreen: \\x1b[32m\nYellow: \\x1b[33m\nBlue: \\x1b[34m\nMagenta: \\x1b[35m\nCyan: \\x1b[36m\nWhite: \\x1b[37m\nReset: \\x1b[0m</code></pre>\n      </div>\n<p>We’ll add the color to the beginning of the string, and add the reset to the end.</p>\n<p>Of course, adding it to each string would be quite repetitive, and wouldn’t read very well, so why don’t we create some helper functions. Here’s a new module for them:</p>\n<div class="gatsby-highlight">\n      <pre class="language-haskell"><code class="language-haskell"><span class="token hvariable">win</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">String</span>\n<span class="token hvariable">win</span> <span class="token hvariable">str</span> <span class="token operator">=</span>\n  <span class="token string">"\\x1b[32;1m"</span> <span class="token operator">&lt;></span> <span class="token hvariable">str</span> <span class="token operator">&lt;></span> <span class="token string">"\\x1b[0m"</span>\n\n<span class="token hvariable">high</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">String</span>\n<span class="token hvariable">high</span> <span class="token hvariable">str</span> <span class="token operator">=</span>\n  <span class="token string">"\\x1b[34;1m"</span> <span class="token operator">&lt;></span> <span class="token hvariable">str</span> <span class="token operator">&lt;></span> <span class="token string">"\\x1b[0m"</span>\n\n<span class="token hvariable">high</span>\' <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">String</span>\n<span class="token hvariable">high</span>\' <span class="token hvariable">str</span> <span class="token operator">=</span>\n  <span class="token string">"\\x1b[34m"</span> <span class="token operator">&lt;></span> <span class="token hvariable">str</span> <span class="token operator">&lt;></span> <span class="token string">"\\x1b[0m"</span>\n\n<span class="token hvariable">low</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">String</span>\n<span class="token hvariable">low</span> <span class="token hvariable">str</span> <span class="token operator">=</span>\n  <span class="token string">"\\x1b[35;1m"</span> <span class="token operator">&lt;></span> <span class="token hvariable">str</span> <span class="token operator">&lt;></span> <span class="token string">"\\x1b[0m"</span>\n\n<span class="token hvariable">low</span>\' <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">String</span>\n<span class="token hvariable">low</span>\' <span class="token hvariable">str</span> <span class="token operator">=</span>\n  <span class="token string">"\\x1b[35m"</span> <span class="token operator">&lt;></span> <span class="token hvariable">str</span> <span class="token operator">&lt;></span> <span class="token string">"\\x1b[0m"</span>\n\n<span class="token hvariable">wrong</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">String</span>\n<span class="token hvariable">wrong</span> <span class="token hvariable">str</span> <span class="token operator">=</span>\n  <span class="token string">"\\x1b[31;1m"</span> <span class="token operator">&lt;></span> <span class="token hvariable">str</span> <span class="token operator">&lt;></span> <span class="token string">"\\x1b[0m"</span>\n\n<span class="token hvariable">bright</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">String</span>\n<span class="token hvariable">bright</span> <span class="token hvariable">str</span> <span class="token operator">=</span>\n  <span class="token string">"\\x1b[37;1m"</span> <span class="token operator">&lt;></span> <span class="token hvariable">str</span> <span class="token operator">&lt;></span> <span class="token string">"\\x1b[0m"</span>\n\n<span class="token hvariable">bg</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">String</span>\n<span class="token hvariable">bg</span> <span class="token hvariable">str</span> <span class="token operator">=</span>\n  <span class="token string">"\\x1b[43;1m"</span> <span class="token operator">&lt;></span> <span class="token hvariable">str</span> <span class="token operator">&lt;></span> <span class="token string">"\\x1b[0m"</span></code></pre>\n      </div>\n<p>We have a function for winning, for being wrong, and different functions for high and low, depending on how far off we are. We also made some others just to make things pretty. You may have noticed the <code class="language-text">;1</code> added and thought, “what’s that?” It makes the text brighter. Let’s see what <code class="language-text">logic</code> looks like with our new pretty things:</p>\n<div class="gatsby-highlight">\n      <pre class="language-haskell"><code class="language-haskell"><span class="token import_statement"><span class="token keyword">import</span> Color</span> <span class="token punctuation">(</span><span class="token hvariable">wrong</span><span class="token punctuation">,</span> <span class="token hvariable">win</span><span class="token punctuation">,</span> <span class="token hvariable">high</span><span class="token punctuation">,</span> <span class="token hvariable">high</span>\'<span class="token punctuation">,</span> <span class="token hvariable">low</span><span class="token punctuation">,</span> <span class="token hvariable">low</span>\'<span class="token punctuation">)</span>\n\n<span class="token hvariable">logic</span> <span class="token hvariable">g</span> <span class="token punctuation">{</span> <span class="token hvariable">low</span><span class="token operator">:</span> <span class="token hvariable">l</span><span class="token punctuation">,</span> <span class="token hvariable">high</span><span class="token operator">:</span> <span class="token hvariable">h</span><span class="token punctuation">,</span> <span class="token hvariable">tolerance</span><span class="token operator">:</span> <span class="token hvariable">tol</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token constant">GameState</span> <span class="token hvariable">guesses</span> <span class="token hvariable">t</span><span class="token punctuation">)</span>\n  <span class="token operator">|</span> <span class="token hvariable">guesses</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token keyword">do</span>\n    <span class="token hvariable">tell</span> <span class="token operator">$</span> <span class="token hvariable">A.singleton</span> <span class="token operator">$</span> <span class="token hvariable">wrong</span> <span class="token operator">$</span> <span class="token string">"Game Over! You\'re out of guesses. The number was "</span> <span class="token operator">&lt;></span> <span class="token builtin">show</span> <span class="token hvariable">t</span>\n    <span class="token hvariable">pure</span> <span class="token constant">Nothing</span>\n  <span class="token operator">|</span> <span class="token hvariable">g</span> <span class="token operator">&lt;</span> <span class="token hvariable">l</span> <span class="token operator">=</span> <span class="token keyword">do</span>\n    <span class="token hvariable">tell</span> <span class="token operator">$</span> <span class="token hvariable">A.singleton</span> <span class="token operator">$</span> <span class="token hvariable">low</span>\' <span class="token string">"Too low for bounds."</span>\n    <span class="token hvariable">pure</span> <span class="token operator">$</span> <span class="token constant">Just</span> <span class="token operator">$</span> <span class="token constant">GameState</span> <span class="token punctuation">(</span><span class="token hvariable">guesses</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">t</span>\n  <span class="token operator">|</span> <span class="token hvariable">g</span> <span class="token operator">></span> <span class="token hvariable">h</span> <span class="token operator">=</span> <span class="token keyword">do</span>\n    <span class="token hvariable">tell</span> <span class="token operator">$</span> <span class="token hvariable">A.singleton</span> <span class="token operator">$</span> <span class="token hvariable">high</span>\' <span class="token string">"Too high for bounds."</span>\n    <span class="token hvariable">pure</span> <span class="token operator">$</span> <span class="token constant">Just</span> <span class="token operator">$</span> <span class="token constant">GameState</span> <span class="token punctuation">(</span><span class="token hvariable">guesses</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">t</span>\n  <span class="token operator">|</span> <span class="token hvariable">t</span> <span class="token operator">==</span> <span class="token hvariable">g</span> <span class="token operator">=</span> <span class="token keyword">do</span>\n    <span class="token hvariable">tell</span> <span class="token operator">$</span> <span class="token hvariable">A.singleton</span> <span class="token operator">$</span> <span class="token hvariable">win</span> <span class="token string">"That\'s it, Exactly!"</span>\n    <span class="token hvariable">pure</span> <span class="token constant">Nothing</span>\n  <span class="token operator">|</span> <span class="token hvariable">g</span> <span class="token operator">&lt;</span> <span class="token hvariable">t</span> <span class="token operator">-</span> <span class="token hvariable">tol</span> <span class="token operator">=</span> <span class="token keyword">do</span>\n    <span class="token hvariable">tell</span> <span class="token operator">$</span> <span class="token hvariable">A.singleton</span> <span class="token operator">$</span> <span class="token hvariable">low</span> <span class="token string">"That\'s too low, try again."</span>\n    <span class="token hvariable">pure</span> <span class="token operator">$</span> <span class="token constant">Just</span> <span class="token operator">$</span> <span class="token constant">GameState</span> <span class="token punctuation">(</span><span class="token hvariable">guesses</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">t</span>\n  <span class="token operator">|</span> <span class="token hvariable">g</span> <span class="token operator">></span> <span class="token hvariable">t</span> <span class="token operator">+</span> <span class="token hvariable">tol</span> <span class="token operator">=</span> <span class="token keyword">do</span>\n    <span class="token hvariable">tell</span> <span class="token operator">$</span> <span class="token hvariable">A.singleton</span> <span class="token operator">$</span> <span class="token hvariable">high</span> <span class="token string">"That\'s too high, try again."</span>\n    <span class="token hvariable">pure</span> <span class="token operator">$</span> <span class="token constant">Just</span> <span class="token operator">$</span> <span class="token constant">GameState</span> <span class="token punctuation">(</span><span class="token hvariable">guesses</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">t</span>\n  <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token keyword">do</span>\n    <span class="token hvariable">tell</span> <span class="token operator">$</span> <span class="token hvariable">A.singleton</span> <span class="token operator">$</span> <span class="token hvariable">win</span> <span class="token operator">$</span> <span class="token string">"Close Enough! The number was "</span> <span class="token operator">&lt;></span> <span class="token builtin">show</span> <span class="token hvariable">t</span>\n    <span class="token hvariable">pure</span> <span class="token constant">Nothing</span></code></pre>\n      </div>\n<p>And, of course, here’s our new <code class="language-text">lineHandler</code> function, with the helpers:</p>\n<div class="gatsby-highlight">\n      <pre class="language-haskell"><code class="language-haskell"><span class="token import_statement"><span class="token keyword">import</span> Color</span> <span class="token punctuation">(</span><span class="token hvariable">bg</span><span class="token punctuation">,</span> <span class="token hvariable">bright</span><span class="token punctuation">,</span> <span class="token hvariable">wrong</span><span class="token punctuation">)</span>\n\n<span class="token hvariable">lineHandler</span> <span class="token hvariable">input</span> <span class="token operator">=</span>\n  <span class="token keyword">case</span> <span class="token hvariable">fromStringAs</span> <span class="token hvariable">decimal</span> <span class="token hvariable">input</span> <span class="token keyword">of</span>\n    <span class="token constant">Just</span> <span class="token hvariable">guess</span> <span class="token operator">-></span> <span class="token keyword">do</span>\n      <span class="token keyword">let</span> <span class="token constant">Tuple</span> <span class="token hvariable">result</span> <span class="token hvariable">written</span> <span class="token operator">=</span> <span class="token hvariable">evalRWS</span> <span class="token punctuation">(</span><span class="token hvariable">game</span> <span class="token hvariable">guess</span><span class="token punctuation">)</span> <span class="token hvariable">env</span> <span class="token hvariable">state</span>\n      <span class="token hvariable">for_</span> <span class="token hvariable">written</span> <span class="token builtin">log</span>\n      <span class="token keyword">case</span> <span class="token hvariable">result</span> <span class="token keyword">of</span>\n        <span class="token constant">Nothing</span> <span class="token operator">-></span> <span class="token keyword">do</span>\n          <span class="token hvariable">RL.close</span> <span class="token hvariable">interface</span>\n        <span class="token constant">Just</span> <span class="token hvariable">newSt</span> <span class="token operator">-></span> <span class="token keyword">do</span>\n          <span class="token builtin">log</span> <span class="token operator">$</span> <span class="token hvariable">bright</span> <span class="token string">"Guess again:"</span>\n          <span class="token hvariable">RL.close</span> <span class="token hvariable">interface</span>\n          <span class="token hvariable">runGame</span> <span class="token hvariable">env</span> <span class="token hvariable">newSt</span>\n    <span class="token constant">Nothing</span> <span class="token operator">-></span> <span class="token keyword">do</span>\n      <span class="token builtin">log</span> <span class="token operator">$</span> <span class="token hvariable">wrong</span> <span class="token string">"Try again, but with a whole number this time."</span>\n      <span class="token hvariable">RL.close</span> <span class="token hvariable">interface</span>\n      <span class="token hvariable">runGame</span> <span class="token hvariable">env</span> <span class="token hvariable">state</span></code></pre>\n      </div>\n<p>And the relevant line in <code class="language-text">main</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-haskell"><code class="language-haskell"><span class="token builtin">log</span> <span class="token operator">$</span> <span class="token hvariable">bg</span> <span class="token string">"Guess a whole number between 1 and 100:"</span></code></pre>\n      </div>\n<h4>Section: The End</h4>\n<p>That’s all, folks! Now our output has some nice coloring, making it easier to see our results at a glance. Let’s see what it looks like:</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/blogPost_p03_01-9fc38d65c63a4d2ac024e460839c9788-07570.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 63.297872340425535%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB5GFRCGV//8QAGBAAAgMAAAAAAAAAAAAAAAAAARAAERL/2gAIAQEAAQUCNwrRf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAEQMZH/2gAIAQEABj8Cgx1//8QAGRAAAwADAAAAAAAAAAAAAAAAAAERECFh/9oACAEBAAE/IWMq46x7ZD//2gAMAwEAAgADAAAAEFsv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QCf/EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExEEFhcZH/2gAIAQEAAT8QsY8TGWtDejrhff1lkVtZ7T//2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="pic of terminal"\n        title=""\n        src="/static/blogPost_p03_01-9fc38d65c63a4d2ac024e460839c9788-f8fb9.jpg"\n        srcset="/static/blogPost_p03_01-9fc38d65c63a4d2ac024e460839c9788-e8976.jpg 148w,\n/static/blogPost_p03_01-9fc38d65c63a4d2ac024e460839c9788-63df2.jpg 295w,\n/static/blogPost_p03_01-9fc38d65c63a4d2ac024e460839c9788-f8fb9.jpg 590w,\n/static/blogPost_p03_01-9fc38d65c63a4d2ac024e460839c9788-85e3d.jpg 885w,\n/static/blogPost_p03_01-9fc38d65c63a4d2ac024e460839c9788-07570.jpg 1128w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Now, isn’t that sweet? You’re probably thinking, “that was a short post. What gives?” You’d be right. We’ll get to more functionality next time. One guess seems kind of…short. One number to guess is no bueno, so next time we’re going to extend the game to more targets if the player gets a guess within tolerance. Stay tuned…</p>',frontmatter:{path:"/what-the-adt-p03",title:"What the ADT Purescript 03 - Clearing up the Gameplay",date:"September 10, 2019"}}},pathContext:{slug:"/what-the-adt-p03/",previous:{fields:{slug:"/what-the-adt-p02/"},frontmatter:{path:"/what-the-adt-p02",title:"What the ADT Purescript 02 - Setting Limits"}},next:null}}}});
//# sourceMappingURL=path---what-the-adt-p-03-ab9925b8b229d92f3719.js.map